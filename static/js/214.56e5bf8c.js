"use strict";(self["webpackChunkticketweb_frontstage"]=self["webpackChunkticketweb_frontstage"]||[]).push([[214],{214:function(e,l,a){a.r(l),a.d(l,{default:function(){return se}});var t=a(252),r=a(577),o=a(963);(0,t.dD)("data-v-25e78516");const s={class:"checkout py-5"},n={class:"container "},i={class:"table-responsive-lg"},u=(0,t._)("h2",{class:"fs-3 mb-3"},"購買內容",-1),c={class:"table table-hover table-primary py-3 text-center"},d=(0,t._)("thead",null,[(0,t._)("tr",null,[(0,t._)("th",{scope:"col"},"#"),(0,t._)("th",{scope:"col"},"票券名稱"),(0,t._)("th",{scope:"col",class:"text-nowrap"},"全票"),(0,t._)("th",{scope:"col",class:"text-nowrap"},"學生票"),(0,t._)("th",{scope:"col",class:"text-nowrap"},"優惠票"),(0,t._)("th",{scope:"col",class:"text-nowrap"},"小計"),(0,t._)("th",{scope:"col",class:"text-nowrap"},"刪除")])],-1),m={scope:"row"},p={class:"text-nowrap"},f=["onClick"],b=(0,t._)("span",{class:"material-icons-outlined"},"delete_forever",-1),_=[b],v=(0,t._)("th",{scope:"row",class:"text-nowrap"},"總計",-1),y=(0,t._)("td",{colspan:"5"},null,-1),x={class:"fs-2 fw-bold"},h=(0,t._)("hr",null,null,-1),w={class:"d-flex align-items-center"},k=(0,t._)("h2",{class:"fs-3"},"填寫購買資訊",-1),C={class:"form-check ms-5"},D=(0,t._)("label",{class:"form-check-label",for:"sameAsUser"}," 帶入用戶資料 ",-1),g={class:"col-md-6"},U=(0,t._)("label",{for:"validationDefault01",class:"form-label"},"購買人姓名",-1),q={class:"col-md-6"},V=(0,t._)("label",{for:"validationDefault02",class:"form-label"},"電子信箱",-1),F={class:"col-md-6"},z=(0,t._)("label",{for:"validationDefault03",class:"form-label"},"連絡電話",-1),I={class:"col-md-6"},A=(0,t._)("label",{for:"validationDefault04",class:"form-label"},"付款方式",-1),T=(0,t._)("option",{selected:"",disabled:"",value:""},"請選擇付款方式",-1),H=(0,t._)("option",{value:"cash"},"超商付款取票",-1),M=(0,t._)("option",{value:"credit"},"線上付款",-1),P=[T,H,M],N={key:0,class:"col-md-6"},Y={class:"rounded bg-primary p-3 text-white"},Z=(0,t._)("p",{class:"fs-5"},"信用卡資訊",-1),j={class:"row g-3"},E={class:"col-md-6"},K=(0,t._)("label",{for:"validationDefault04",class:"form-label"},"信用卡持有人",-1),O={class:"col-md-6"},R=(0,t._)("label",{for:"validationDefault05",class:"form-label"},"信用卡號碼(16碼)",-1),S={class:"col-md-3"},W=(0,t._)("label",{for:"validationDefault06",class:"form-label"},"到期日(Exp)",-1),$={class:"col-md-3"},B=(0,t._)("label",{for:"validationDefault07",class:"form-label"},"驗證碼(3碼)",-1),G={class:"col-12 d-flex align-items-center justify-content-end"},J={class:"form-check me-4"},L=(0,t._)("label",{class:"form-check-label",for:"invalidCheck2"}," Agree to terms and conditions ",-1),Q={key:0,type:"submit",class:"btn btn-primary"},X={key:1,type:"submit",class:"btn btn-primary"};function ee(e,l,a,b,T,H){return(0,t.wg)(),(0,t.iD)("div",s,[(0,t._)("div",n,[(0,t._)("div",i,[u,(0,t._)("table",c,[d,(0,t._)("tbody",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(b.cartItem,((e,l)=>((0,t.wg)(),(0,t.iD)("tr",{key:l},[(0,t._)("th",m,(0,r.zw)(`${l+1}`),1),(0,t._)("td",p,(0,r.zw)(e.title),1),(0,t._)("td",null,(0,r.zw)(e.num.full),1),(0,t._)("td",null,(0,r.zw)(e.num.student),1),(0,t._)("td",null,(0,r.zw)(e.num.discount),1),(0,t._)("td",null,(0,r.zw)(e.subTotal),1),(0,t._)("td",null,[(0,t._)("a",{href:"#",onClick:(0,o.iM)((a=>b.deleteFromCart(l,e.subTotal)),["prevent"])},_,8,f)])])))),128))]),(0,t._)("tfoot",null,[(0,t._)("tr",null,[v,y,(0,t._)("td",x,(0,r.zw)(b.total),1)])])])]),h,(0,t._)("form",{onSubmit:l[10]||(l[10]=(0,o.iM)(((...e)=>b.submitCheckoutForm&&b.submitCheckoutForm(...e)),["prevent"])),class:"buyerInfo row g-3"},[(0,t._)("div",w,[k,(0,t._)("div",C,[(0,t.wy)((0,t._)("input",{class:"form-check-input",type:"checkbox",id:"sameAsUser","onUpdate:modelValue":l[0]||(l[0]=e=>b.sameAsUser=e)},null,512),[[o.e8,b.sameAsUser]]),D])]),(0,t._)("div",g,[U,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",id:"validationDefault01",placeholder:"請填寫全名","onUpdate:modelValue":l[1]||(l[1]=e=>b.buyer.name=e),required:""},null,512),[[o.nr,b.buyer.name]])]),(0,t._)("div",q,[V,(0,t.wy)((0,t._)("input",{type:"email",class:"form-control",id:"validationDefault02",placeholder:"xxx@gmail.com","onUpdate:modelValue":l[2]||(l[2]=e=>b.buyer.email=e),required:""},null,512),[[o.nr,b.buyer.email]])]),(0,t._)("div",F,[z,(0,t.wy)((0,t._)("input",{type:"tel",class:"form-control",id:"validationDefault03",placeholder:"09xxxxxxxx","onUpdate:modelValue":l[3]||(l[3]=e=>b.buyer.tele=e),required:""},null,512),[[o.nr,b.buyer.tele]])]),(0,t._)("div",I,[A,(0,t.wy)((0,t._)("select",{class:"form-select",id:"validationDefault04","onUpdate:modelValue":l[4]||(l[4]=e=>b.buyer.payment=e),required:""},P,512),[[o.bM,b.buyer.payment]])]),(0,t.Wm)(o.uT,{name:"fade"},{default:(0,t.w5)((()=>["credit"==b.buyer.payment?((0,t.wg)(),(0,t.iD)("div",N,[(0,t._)("div",Y,[Z,(0,t._)("div",j,[(0,t._)("div",E,[K,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",id:"validationDefault04",placeholder:"請填寫全名","onUpdate:modelValue":l[5]||(l[5]=e=>b.buyer.creditCard.name=e),required:""},null,512),[[o.nr,b.buyer.creditCard.name]])]),(0,t._)("div",O,[R,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",id:"validationDefault05",placeholder:"xxxx xxxx xxxx xxxx","onUpdate:modelValue":l[6]||(l[6]=e=>b.buyer.creditCard.num=e),required:""},null,512),[[o.nr,b.buyer.creditCard.num]])]),(0,t._)("div",S,[W,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",id:"validationDefault06",placeholder:"xx/xx","onUpdate:modelValue":l[7]||(l[7]=e=>b.buyer.creditCard.exp=e),required:""},null,512),[[o.nr,b.buyer.creditCard.exp]])]),(0,t._)("div",$,[B,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",id:"validationDefault07",placeholder:"xxx","onUpdate:modelValue":l[8]||(l[8]=e=>b.buyer.creditCard.verified=e),required:""},null,512),[[o.nr,b.buyer.creditCard.verified]])])])])])):(0,t.kq)("",!0)])),_:1}),(0,t._)("div",G,[(0,t._)("div",J,[(0,t.wy)((0,t._)("input",{class:"form-check-input",type:"checkbox",id:"invalidCheck2","onUpdate:modelValue":l[9]||(l[9]=e=>b.buyer.agreement=e),required:""},null,512),[[o.e8,b.buyer.agreement]]),L]),"credit"==b.buyer.payment?((0,t.wg)(),(0,t.iD)("button",Q,"確認付款")):((0,t.wg)(),(0,t.iD)("button",X,"送出訂單"))])],32)])])}(0,t.Cn)();var le=a(709),ae=a(262),te=a(503),re=(a(433),a(119)),oe={name:"CheckOut",setup(){const e=(0,le.oR)(),l=(0,re.tv)(),a=(0,ae.Fl)((()=>e.getters.cartContent));function r(l,a){e.dispatch("deleteFromCart",{index:l,subTotal:a})}const o=(0,ae.Fl)((()=>e.getters.total)),s=(0,ae.Fl)((()=>e.getters.user)),n=(0,ae.iH)(),i=(0,ae.iH)({name:null,email:null,tele:null,payment:null,isPaid:null,agreement:null,creditCard:{name:null,num:null,exp:null,verified:null}});async function u(){i.value.payment,i.value.isPaid;const t=await te.Z.firestore(te.Z.apps[1]).collection("order").doc();await t.set({userId:s.value.uid,buyerInfo:i.value,purchaseItems:a.value,total:o.value}),l.push({path:"/admin/myticket"}),e.dispatch("clearCart")}return(0,t.YP)(n,(e=>{1==e?(i.value.name=s.value.displayName,i.value.email=s.value.email,i.value.tele=s.value.phoneNumber):(i.value.name=null,i.value.email=null,i.value.tele=null)})),{cartItem:a,deleteFromCart:r,total:o,userData:s,sameAsUser:n,buyer:i,submitCheckoutForm:u}}};oe.render=ee,oe.__scopeId="data-v-25e78516";var se=oe}}]);
//# sourceMappingURL=214.56e5bf8c.js.map