"use strict";(self["webpackChunkticketweb_frontstage"]=self["webpackChunkticketweb_frontstage"]||[]).push([[245],{245:function(e,l,a){a.r(l),a.d(l,{default:function(){return de}});var t=a(252),r=a(577),o=a(963);(0,t.dD)("data-v-1e1b78b2");const s={class:"checkout py-5"},n={class:"container "},c={class:"table-responsive-lg"},u=(0,t._)("h2",{class:"fs-3 mb-3"},"購買內容",-1),i={class:"table table-hover table-primary py-3 text-center"},d=(0,t._)("thead",null,[(0,t._)("tr",null,[(0,t._)("th",{scope:"col"},"#"),(0,t._)("th",{scope:"col"},"票券名稱"),(0,t._)("th",{scope:"col",class:"text-nowrap"},"全票"),(0,t._)("th",{scope:"col",class:"text-nowrap"},"學生票"),(0,t._)("th",{scope:"col",class:"text-nowrap"},"優惠票"),(0,t._)("th",{scope:"col",class:"text-nowrap"},"小計"),(0,t._)("th",{scope:"col",class:"text-nowrap"},"刪除")])],-1),m={key:0},p=(0,t._)("tr",null,[(0,t._)("td",{colspan:"7"},[(0,t.Uk)("哇! 空空如也!"),(0,t._)("br"),(0,t.Uk)("再去逛逛吧")])],-1),b={colspan:"7"},f=(0,t.Uk)("探索活動"),_={key:1},y={scope:"row"},v={class:"text-nowrap"},x=["onClick"],h=(0,t._)("span",{class:"material-icons-outlined"},"delete_forever",-1),w=[h],k=(0,t._)("th",{scope:"row",class:"text-nowrap"},"總計",-1),D=(0,t._)("td",{colspan:"5"},null,-1),g={class:"fs-2 fw-bold"},C=(0,t._)("hr",null,null,-1),U={class:"d-flex align-items-center"},q=(0,t._)("h2",{class:"fs-3"},"填寫購買資訊",-1),V={class:"form-check ms-5"},F=(0,t._)("label",{class:"form-check-label",for:"sameAsUser"}," 帶入用戶資料 ",-1),I={class:"col-md-6"},z=(0,t._)("label",{for:"validationDefault01",class:"form-label"},"購買人姓名",-1),A={class:"col-md-6"},T=(0,t._)("label",{for:"validationDefault02",class:"form-label"},"電子信箱",-1),H={class:"col-md-6"},M=(0,t._)("label",{for:"validationDefault03",class:"form-label"},"連絡電話",-1),P={class:"col-md-6"},N=(0,t._)("label",{for:"validationDefault04",class:"form-label"},"付款方式",-1),W=(0,t._)("option",{selected:"",disabled:"",value:""},"請選擇付款方式",-1),Y=(0,t._)("option",{value:"cash"},"超商付款取票",-1),Z=(0,t._)("option",{value:"credit"},"線上付款",-1),j=[W,Y,Z],E={key:0,class:"col-md-6"},K={class:"rounded bg-primary p-3 text-white"},O=(0,t._)("p",{class:"fs-5"},"信用卡資訊",-1),R={class:"row g-3"},S={class:"col-md-6"},$=(0,t._)("label",{for:"validationDefault04",class:"form-label"},"信用卡持有人",-1),B={class:"col-md-6"},G=(0,t._)("label",{for:"validationDefault05",class:"form-label"},"信用卡號碼(16碼)",-1),J={class:"col-md-3"},L=(0,t._)("label",{for:"validationDefault06",class:"form-label"},"到期日(Exp)",-1),Q={class:"col-md-3"},X=(0,t._)("label",{for:"validationDefault07",class:"form-label"},"驗證碼(3碼)",-1),ee={class:"col-12 d-flex align-items-center justify-content-end"},le={class:"form-check me-4"},ae=(0,t._)("label",{class:"form-check-label",for:"invalidCheck2"}," Agree to terms and conditions ",-1),te={key:0,type:"submit",class:"btn btn-primary"},re={key:1,type:"submit",class:"btn btn-primary"};function oe(e,l,a,h,W,Y){const Z=(0,t.up)("router-link");return(0,t.wg)(),(0,t.iD)("div",s,[(0,t._)("div",n,[(0,t._)("div",c,[u,(0,t._)("table",i,[d,h.cartItem.length<=0?((0,t.wg)(),(0,t.iD)("tbody",m,[p,(0,t._)("tr",null,[(0,t._)("td",b,[(0,t.Wm)(Z,{to:"/search",class:"btn btn-secondary"},{default:(0,t.w5)((()=>[f])),_:1})])])])):((0,t.wg)(),(0,t.iD)("tbody",_,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(h.cartItem,((e,l)=>((0,t.wg)(),(0,t.iD)("tr",{key:l},[(0,t._)("th",y,(0,r.zw)(`${l+1}`),1),(0,t._)("td",v,(0,r.zw)(e.title),1),(0,t._)("td",null,(0,r.zw)(e.num.full),1),(0,t._)("td",null,(0,r.zw)(e.num.student),1),(0,t._)("td",null,(0,r.zw)(e.num.discount),1),(0,t._)("td",null,(0,r.zw)(e.subTotal),1),(0,t._)("td",null,[(0,t._)("a",{href:"#",onClick:(0,o.iM)((a=>h.deleteFromCart(l,e.subTotal)),["prevent"])},w,8,x)])])))),128))])),(0,t._)("tfoot",null,[(0,t._)("tr",null,[k,D,(0,t._)("td",g,(0,r.zw)(h.total),1)])])])]),C,(0,t._)("form",{onSubmit:l[10]||(l[10]=(0,o.iM)(((...e)=>h.submitCheckoutForm&&h.submitCheckoutForm(...e)),["prevent"])),class:"buyerInfo row g-3"},[(0,t._)("div",U,[q,(0,t._)("div",V,[(0,t.wy)((0,t._)("input",{class:"form-check-input",type:"checkbox",id:"sameAsUser","onUpdate:modelValue":l[0]||(l[0]=e=>h.sameAsUser=e)},null,512),[[o.e8,h.sameAsUser]]),F])]),(0,t._)("div",I,[z,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",id:"validationDefault01",placeholder:"請填寫全名","onUpdate:modelValue":l[1]||(l[1]=e=>h.buyer.name=e),required:""},null,512),[[o.nr,h.buyer.name]])]),(0,t._)("div",A,[T,(0,t.wy)((0,t._)("input",{type:"email",class:"form-control",id:"validationDefault02",placeholder:"xxx@gmail.com","onUpdate:modelValue":l[2]||(l[2]=e=>h.buyer.email=e),required:""},null,512),[[o.nr,h.buyer.email]])]),(0,t._)("div",H,[M,(0,t.wy)((0,t._)("input",{type:"tel",class:"form-control",id:"validationDefault03",placeholder:"09xxxxxxxx","onUpdate:modelValue":l[3]||(l[3]=e=>h.buyer.tele=e),required:""},null,512),[[o.nr,h.buyer.tele]])]),(0,t._)("div",P,[N,(0,t.wy)((0,t._)("select",{class:"form-select",id:"validationDefault04","onUpdate:modelValue":l[4]||(l[4]=e=>h.buyer.payment=e),required:""},j,512),[[o.bM,h.buyer.payment]])]),(0,t.Wm)(o.uT,{name:"fade"},{default:(0,t.w5)((()=>["credit"==h.buyer.payment?((0,t.wg)(),(0,t.iD)("div",E,[(0,t._)("div",K,[O,(0,t._)("div",R,[(0,t._)("div",S,[$,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",id:"validationDefault04",placeholder:"請填寫全名","onUpdate:modelValue":l[5]||(l[5]=e=>h.buyer.creditCard.name=e),required:""},null,512),[[o.nr,h.buyer.creditCard.name]])]),(0,t._)("div",B,[G,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",id:"validationDefault05",placeholder:"xxxx xxxx xxxx xxxx","onUpdate:modelValue":l[6]||(l[6]=e=>h.buyer.creditCard.num=e),required:""},null,512),[[o.nr,h.buyer.creditCard.num]])]),(0,t._)("div",J,[L,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",id:"validationDefault06",placeholder:"xx/xx","onUpdate:modelValue":l[7]||(l[7]=e=>h.buyer.creditCard.exp=e),required:""},null,512),[[o.nr,h.buyer.creditCard.exp]])]),(0,t._)("div",Q,[X,(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",id:"validationDefault07",placeholder:"xxx","onUpdate:modelValue":l[8]||(l[8]=e=>h.buyer.creditCard.verified=e),required:""},null,512),[[o.nr,h.buyer.creditCard.verified]])])])])])):(0,t.kq)("",!0)])),_:1}),(0,t._)("div",ee,[(0,t._)("div",le,[(0,t.wy)((0,t._)("input",{class:"form-check-input",type:"checkbox",id:"invalidCheck2","onUpdate:modelValue":l[9]||(l[9]=e=>h.buyer.agreement=e),required:""},null,512),[[o.e8,h.buyer.agreement]]),ae]),"credit"==h.buyer.payment?((0,t.wg)(),(0,t.iD)("button",te,"確認付款")):((0,t.wg)(),(0,t.iD)("button",re,"送出訂單"))])],32)])])}(0,t.Cn)();var se=a(709),ne=a(262),ce=a(503),ue=(a(433),a(119)),ie={name:"CheckOut",setup(){const e=(0,se.oR)(),l=(0,ue.tv)(),a=(0,ne.Fl)((()=>e.getters.cartContent));function r(l,a){e.dispatch("deleteFromCart",{index:l,subTotal:a})}const o=(0,ne.Fl)((()=>e.getters.total)),s=(0,ne.Fl)((()=>e.getters.user)),n=(0,ne.iH)(),c=(0,ne.iH)({name:null,email:null,tele:null,payment:null,isPaid:null,agreement:null,creditCard:{name:null,num:null,exp:null,verified:null}});async function u(){c.value.payment,c.value.isPaid;const t=await ce.Z.firestore(ce.Z.apps[1]).collection("order").doc();await t.set({userId:s.value.uid,buyerInfo:c.value,purchaseItems:a.value,total:o.value}),alert("訂單建立成功"),l.push({path:"/admin/myticket"}),e.dispatch("clearCart")}return(0,t.YP)(n,(e=>{1==e?(c.value.name=s.value.displayName,c.value.email=s.value.email,c.value.tele=s.value.phoneNumber):(c.value.name=null,c.value.email=null,c.value.tele=null)})),{cartItem:a,deleteFromCart:r,total:o,userData:s,sameAsUser:n,buyer:c,submitCheckoutForm:u}}};ie.render=oe,ie.__scopeId="data-v-1e1b78b2";var de=ie}}]);
//# sourceMappingURL=245.1d7a4f17.js.map